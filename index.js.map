{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["const API_BASE = 'https://furniture-store.b.goit.study/api';\n\nconst categoriesContainer = document.querySelector('.categories-filter');\nconst furnitureList = document.querySelector('.furniture-list');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet allProducts = [];\nlet visibleProducts = [];\nlet currentCategory = null;\nlet perPage = 8;\n\nasync function fetchCategories() {\n    try {\n        const res = await fetch(`${API_BASE}/categories`);\n        const data = await res.json();\n        renderCategories(data);\n    } catch (error) {\n        console.error('Помилка завантаження', error);\n    }\n}\n\nfunction renderCategories(categories) {\n    categoriesContainer.innerHTML = '';\n\n    const allBtn = document.createElement('button');\n    allBtn.textContent = 'Всі товари';\n    allBtn.classList.add('active');\n    allBtn.addEventListener('click', () => handleCategoryClick(null));\n    categoriesContainer.appendChild(allBtn);\n\n    categories.forEach(category => {\n        const btn = document.createElement('button');\n        btn.textContent = category.name;\n        btn.addEventListener('click', () => handleCategoryClick(category.name));\n        categoriesContainer.appendChild(btn);\n    });\n}\n\nfunction handleCategoryClick(category) {\n    currentCategory = category; \n    visibleProducts = [];\n\n    const buttons = categoriesContainer.querySelectorAll('button');\n    buttons.forEach(btn => {\n        btn.classList.remove('active');\n        if (btn.textContent === (category || 'Всі товари')) {\n            btn.classList.add('active');\n        }\n    });\n    showFilteredProducts();\n}\n\nasync function fetchProducts() {\n    try {\n        const res = await fetch (`${API_BASE}/products`);\n        const data = await res.json();\n        allProducts = data;\n        showFilteredProducts();\n    } catch (error) {\n        console.error('Помилка завантаження товарів', error);\n    }\n}\n\nfunction showFilteredProducts() {\n    furnitureList.innerHTML = '';\n    visibleProducts = [];\n\n    const filtered = currentCategory ? allProducts.filter(p => p.category.name === currentCategory) : allProducts;\n\n    if (filtered.length === 0) {\n        furnitureList.innerHTML = 'Товарів не знайдено';\n        loadMoreBtn.style.display = 'none';\n        return;\n    }\n\n    loadMoreBtn.style.display = 'block';\n    loadNextBatch(filtered);\n}\n\nfunction loadNextBatch(filteredList) {\n    const nextProducts = filteredList.slice(visibleProducts.length, visibleProducts.length + perPage);\n    visibleProducts = visibleProducts.concat(nextProducts);\n\n    nextProducts.forEach(product => {\n        const li = document.createElement('li');\n        li.classList.add('furniture-card');\n        li.innerHTML = `\n            <img src=\"${product.image}\" alt=\"${product.title}\" />\n            <div class=\"info\">\n                <h3 class=\"title\">${product.title}</h3>\n                <p class=\"price\">${product.price} грн</p>\n                <button class=\"details-btn\" data-id=\"${product._id}\">Детальніше</button>\n            </div>\n        `;\n        furnitureList.appendChild(li);\n    });\n\n    if (visibleProducts.length >= filteredList.length) {\n        loadMoreBtn.style.display = 'none';\n    }\n}\n\nloadMoreBtn.addEventListener('click', () => {\n    const filtered = currentCategory ? allProducts.filter(p => p.category.name === currentCategory) : allProducts;\n    loadNextBatch(filtered);\n});\n\nfurnitureList.addEventListener('click', async (e) => {\n    if (e.target.classList.contains('details-btn')) {\n        const id = e.target.dataset.id;\n        try {\n            const res = await fetch(`${API_BASE}/products/${id}`);\n            const product = await res.json();\n            showModal(product);\n        } catch (error) {\n            console.error('Помилка завантаження деталей товару', error);\n        }\n    }\n});\n\nfetchCategories();\nfetchProducts();"],"names":["API_BASE","categoriesContainer","furnitureList","loadMoreBtn","allProducts","visibleProducts","currentCategory","perPage","fetchCategories","data","renderCategories","error","categories","allBtn","handleCategoryClick","category","btn","showFilteredProducts","fetchProducts","filtered","p","loadNextBatch","filteredList","nextProducts","product","li","e","id"],"mappings":"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"}